{% load static %}
{% load custom_filters %}
{% load compress %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Большой выбор входных дверей в Москве. Высокое качество, доставка и установка. Закажите двери по выгодным ценам в нашем магазине!"/>
    <meta name="keywords" content="купить двери, двери в Москве, входные двери, двери с установкой, магазин дверей, паритет двери"/>
    <title>
      {% block title %}
      Купить двери в Москве — Входные двери по лучшим ценам | Паритет двери
      {% endblock %}
    </title>
    <!-- Компрессор -->
    <!-- Подключение стилей CSS -->
    <link rel="icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon">
    {% compress css %}
    <link rel="stylesheet" href="{% static 'css/custom.css' %}">
    <link rel="stylesheet" href="{% static 'css/a_pallete.css' %}">
    <link rel="stylesheet" href="{% static 'bootstrap-icons-1.11.3/font/bootstrap-icons.css' %}">
    <!-- CSS для Ion.RangeSlider -->
    <link rel="stylesheet" href="{% static 'css/ion.rangeSlider.min.css' %}">
    {% endcompress %}

    {% compress js %}
    <!-- jQuery (необходим для работы Ion.RangeSlider) -->
    <script src="{% static 'js/jquery-3.6.0.min.js' %}"></script>

    <!-- JS для Ion.RangeSlider -->
    <script src="{% static 'js/ion.rangeSlider.min.js' %}"></script>
    <!-- Подключение скриптов JavaScript -->
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    {% endcompress %}

</head>

<style>
  @font-face {
      font-family: 'tilda';
      src: url('{% static "fonts/TildaSans-Medium.ttf" %}') format('truetype');
      font-weight: 500;
      font-style: normal; /* Обычный стиль (не курсив) */
  }
  @font-face {
      font-family: 'tilda-light';
      src: url('{% static "fonts/TildaSans-Light.ttf" %}') format('truetype');
      font-weight: 200;
      font-style: normal;
  }
  @font-face {
    font-family: 'gasalt'; 
    src: url('{% static "fonts/Roadgeek 2005 series 5wr.ttf" %}') format('truetype');
    font-weight: 400; /* Обычный вес */
    font-style: normal; /* Обычный стиль (не курсив) */
  }
  #map {
      height: 500px;
      width: 100%;
  }
  @media (max-width: 992px) {
    #map {
        height: 200px;
    }
    .text-scroll {
      overflow-y: auto; /* Включает вертикальную прокрутку */
      max-height: 300px; /* Максимальная высота контейнера, чтобы прокрутка активировалась */
      -webkit-overflow-scrolling: touch; /* Плавная прокрутка на сенсорных экранах */
    }

    .text-scroll::-webkit-scrollbar {
      width: 4px; /* Ширина скроллбара */
    }

    .text-scroll::-webkit-scrollbar-thumb {
      background-color: #ced4da; /* Цвет ползунка */
      border-radius: 2px; /* Закругленные углы ползунка */
    }

    .text-scroll::-webkit-scrollbar-thumb:hover {
      background-color: #999; /* Цвет ползунка при наведении */
    }
    .banner-btn {
      width: 100px;
      font-size: xx-small;
    }
  }
  @media (min-width: 992px) { 
  .border-end-lg {
    border-right: 1px solid #ced4da;
  }
  .border-start-lg {
    border-left: 1px solid #ced4da;
  }
}
</style>
<style>
  /* Задать цвет границы */
  .custom-border {
    border: 2px solid #ff5733; /* Замените цвет на желаемый */
  }

  /* Задать цвет тени */
  .custom-shadow {
    box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2); /* Настройте цвет и параметры тени */
  }
</style>
<body class="d-flex flex-column min-vh-100">
    <!-- Включение header -->
    {% include 'header/header.html' %}
    <main>
        <aside class='container'>
          {% block content %}
            <!-- <div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel">
              <article class="carousel-inner">
                <div class="carousel-item active">
                  <img src="{% static 'images/banners/baner-argus-slide.png' %}" class="d-block w-100" alt="Аргус">
                </div>
                <div class="carousel-item">
                  <img src="{% static 'images/banners/paritet-slide-01-min-slide.png' %}" class="d-block w-100" alt="Доставка">
                </div>
                <div class="carousel-item">
                  <img src="{% static 'images/banners/paritet-slide-02-min-slide.png' %}" class="d-block w-100" alt="Установка">
                </div>
                <div class="carousel-item">
                  <img src="{% static 'images/banners/paritet-slide-03-min-slide.png' %}" class="d-block w-100" alt="Интекрон">
                </div>
                <div class="carousel-item">
                  <img src="{% static 'images/banners/paritet-slide-slide.png' %}" class="d-block w-100" alt="Термодвери">
                </div>
                <div class="carousel-item">
                  <img src="{% static 'images/banners/skidka-na-vse-dveri-slide.png' %}" class="d-block w-100" alt="Скидка">
                </div>
              </article>
              <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
              </button>
            </div> -->
            <aside class="mt-2 position-relative" style="overflow: hidden;">
              <img src="{% static 'images/index_banner.png' %}" 
                   alt="Описание изображения" 
                   style="width: 100%; height: auto; object-fit: cover;">
              <a href="/catalog" class="btn btn-outline-dark position-absolute banner-btn" 
                 style="top: 80%; left: 62%; transform: translate(-50%, -50%);">
                Открыть каталог
              </a>
            </aside>
            <aside class="my-4">
              <!-- <h1 class="text-white px-4 bg-dark rounded d-inline" style="font-family: tilda;">Двери</h1> -->
              <!-- <h2 class=" text-danger mt-3" style="font-family: tilda;">По выгодным ценам</h2> -->
              <h1 style="font-family: tilda;">Двери</h1>
              <h2 style="font-family: tilda;">По выгодным ценам</h2>
            </aside>
            <aside>
              <p class="text-dark h5 lh-1-lg" style="font-family: tilda-light;">
                Входные металлические двери в Москве представлены в огромном ассортименте: модели отличаются по комплектации, отделке, стоимости.
                Приобрести двери в розницу с оптового склада в Москве по цене производителя просто. Мы собрали популярные модели известных брендов
                в одном месте – каталоге «Паритет Двери». Все двери прошли обязательную сертификацию и соответствуют нормам ГОСТ.
                Клиенты «Паритет-двери» всегда получают крепкие двери по доступной цене. Мы позаботились о том, чтобы выбор был максимально
                простым и результативным. Вы никогда не увидите у нас двери сомнительного происхождения. Аналитики ежедневно просматривают десятки
                каталогов, изучают рыночную ситуацию. Поэтому в наш интернет-магазин попадают лучшие отечественные двери.
                Российских производителей выбрали не случайно. Кто как не наши матера знают особенности планировки, климата, вкусовых предпочтений.
                Партнеры компании занимают уверенные позиции, предлагают продукцию исключительного качества. Мы закупаем металлические и межкомнатные
                двери напрямую, без посредников. Цены формируем с учётом реальных затрат. Никаких накруток и дополнительных наценок.
              </p>
            </aside>
            <aside class="my-4">
                <!-- <h1 class="text-white px-4 bg-dark rounded d-inline" style="font-family: tilda;">Почему</h1>
                <h2 class="text-danger mt-3" style="font-family: tilda;">выбирают нас</h2> -->
                <h1 style="font-family: tilda;">Популярные стальные двери</h1>
            </aside>
            <section class="random-doors container">
              <section class="row">
                {% for door in random_doors %}
                  <div class="col-lg-3 col-12 door-item" data-price="{{ door.price }}" data-orders="{{ door.get_order_count }}" data-novelty="{{ door.id }}">
                    <div class="card h-100 d-flex flex-column">
                      <section class="d-flex align-items-center p-2" style="height: 500px; overflow: hidden;">
                        <div class="position-absolute d-flex flex-column" style="top: 10px; z-index: 2;">
                          {% for tag in door.tags.all %}
                            <span class="badge rounded-pill text-{{ tag.text_color }} mx-auto" style="background-color: {{ tag.color_hex }}; margin-bottom: 5px;">{{ tag.title }}</span>
                          {% endfor %}
                        </div>
                        <div class="d-flex flex-row flex-wrap align-items-start" style="width: 100%;">
                          {% with door.images|split_and_get_one as image_urls %}
                            {% for image_url in image_urls %}
                              <div class="image-container d-flex justify-content-center" style="flex: 1 1 calc(100%); margin: 5px; overflow: hidden; height: 480px;">
                                <img src="{{ MEDIA_URL }}{{ image_url }}" class="img-fluid" alt="{{ door.title }} - Image {{ forloop.counter }}" style="height: 100%;  object-fit: cover;">
                              </div>
                            {% endfor %}
                          {% endwith %}
                        </div>
                      </section>
            
                      <section class="card-body d-flex flex-column mt-auto">
                        <p class="card-title fw-bold">{{ door.title }}</p>
                        {% if door.discount %}
                        <label class="rounded p-2" style="background-color: #ffe5e5; font-family: gasalt;">
                          <label class="card-text rounded" style="color: #ff0000;">{{ door.price|calculate_discount:door.discount }} ₽</label>
                          <label class="card-text rounded text-secondary strikethrough-svg" style="font-size: small;">
                            <span>{{ door.price|format_number }} ₽</span>
                            <svg viewBox="0 0 100 100">
                              <line x1="-150" y1="0" x2="150" y2="80" stroke="#ff0000" stroke-width="4"/>
                            </svg>
                          </label>
                          <label class="card-text rounded bg-danger text-white p-1" style="font-size: x-small;">-{{ door.discount }}%</label>
                        </label>
                        {% else %}
                        <label class="card-text p-2 rounded text-dark" style="font-family: gasalt;">{{ door.price|format_number }} ₽</label>
                        {% endif %}
                        <div class="mt-auto">
                          <a href="{% url 'door_detail' slug=door.slug %}"><button class="btn btn-outline-danger w-100">Узнать подробнее</button></a>
                        </div>
                      </section>
                    </div>
                  </div>
                {% endfor %}
              </section>
            </section>
            <aside class="my-4 text-center">
              <h1 style="font-family: tilda;">Наши услуги</h1>
            </aside>
            <aside class="my-4 row d-flex justify-content-center">
              <div class="col-lg-2 col-12 shadow d-flex flex-column justify-content-center align-items-center py-5 mx-3 text-center">
                <i class="bi bi-tools fs-1 text-primary"></i>
                <p class="fw-bold fs-5">Выезд инженера</p>
                <p>Наши мастера выезжают для замеров, консультаций или заключения договора</p>
              </div>
              <div class="col-lg-2 col-12 shadow d-flex flex-column justify-content-center align-items-center py-5 mx-3 text-center">
                <i class="bi bi-truck fs-1 text-primary"></i>
                <p class="fw-bold fs-5">Доставка</p>
                <p>Доставим нужную дверь по вашему адресу в Москве и Подмосковье точно до объекта, даже если в доме нет лифта</p>
              </div>
              <div class="col-lg-2 col-12 shadow d-flex flex-column justify-content-center align-items-center py-5 mx-3 text-center">
                <i class="bi bi-house-door fs-1 text-primary"></i>
                <p class="fw-bold fs-5">Монтаж</p>
                <p>Выполняем комплексную установку двери с подготовкой проёма, вывозом мусора и гарантией результата</p>
              </div>
              <div class="col-lg-2 col-12 shadow d-flex flex-column justify-content-center align-items-center py-5 mx-3 text-center">
                <i class="bi bi-building fs-1 text-primary"></i>
                <p class="fw-bold fs-5">Производство</p>
                <p>Изготавливаем двери с нужными параметрами на собственном современном оборудовании</p>
              </div>
            </aside>
            
            <aside class="my-4">
                <h1 style="font-family: tilda;">Доставка и выезд мастера</h1>
            </aside>
            <table class="table">
              <thead>
                <tr>
                  <th class='bg-danger text-white' scope="col">Услуга</th>
                  <th class='bg-danger text-white' scope="col">Цена</th>
                </tr>                
              </thead>
              <tbody>
                <tr>
                  <td>Выезд внутри МКАД + 25 км</td>
                  <td>Бесплатно</td>
                </tr>
                <tr>
                  <td>Выезд далее 25 км от МКАД</td>
                  <td>30 руб./км</td>
                </tr>
                <tr>
                  <td>Доставка до терминала ТК</td>
                  <td>от 250 руб., в зависимости от удалённости компании</td>
                </tr>
                <tr>
                  <td>Замер, консультация, расчёты</td>
                  <td>Бесплатно</td>
                </tr>
                <tr>
                  <td>Ручной подъём без лифта</td>
                  <td>50-120 руб./этаж, в зависимости от типа подъезда и высоты</td>
                </tr>
                <tr>
                  <td>Ночной/срочный выезд</td>
                  <td>от 500 руб.</td>
                </tr>
                <tr>
                  <td>Выезд на крупные объекты (расчёт более 20 позиций)</td>
                  <td>от 1000 руб.</td>
                </tr>
                <tr>
                  <td>Доставка свыше 25 позиций</td>
                  <td>от 2000 руб.</td>
                </tr>
              </tbody>
            </table>
            <aside class="my-4">
                <!-- <h1 class="text-white px-4 bg-dark rounded d-inline" style="font-family: tilda;">Почему</h1>
                <h2 class="text-danger mt-3" style="font-family: tilda;">выбирают нас</h2> -->
                <h1 style="font-family: tilda;">Установка дверей и сопутствующие работы</h1>
            </aside>
            <aside>
              <table class="table">
                <thead>
                  <tr>
                    <th class='bg-danger text-white' scope="col">Услуга</th>
                    <th class='bg-danger text-white' scope="col">Цена</th>
                  </tr>                
                </thead>
                <tbody>
                  <tr>
                    <td>Монтаж двери с подготовкой проёма</td>
                    <td>Бесплатно</td>
                  </tr>
                  <tr>
                    <td>Демонтаж старой двери</td>
                    <td>200-700 руб., в зависимости от веса и способа установки</td>
                  </tr>
                  <tr>
                    <td>Пропенивание стыков</td>
                    <td>300 руб.</td>
                  </tr>
                  <tr>
                    <td>Огнестойкое запенивание швов</td>
                    <td>500 руб.</td>
                  </tr>
                  <tr>
                    <td>Вывод звонка</td>
                    <td>300 руб.</td>
                  </tr>
                  <tr>
                    <td>Расширение проёма</td>
                    <td>от 500 руб., в зависимости от размера и формы</td>
                  </tr>
                  <tr>
                    <td>Усиление проёма</td>
                    <td>от 1000 руб.</td>
                  </tr>
                  <tr>
                    <td>Дополнительное крепление коробки</td>
                    <td>150 руб./точка крепления</td>
                  </tr>
                  <tr>
                    <td>Упаковка в плёнку после установки</td>
                    <td>250 руб.</td>
                  </tr>
                  <tr>
                    <td>Сварочные работы</td>
                    <td>от 500 руб.</td>
                  </tr>
                </tbody>
              </table>
              <aside class="my-4">
                <!-- <h1 class="text-white px-4 bg-dark rounded d-inline" style="font-family: tilda;">Почему</h1>
                <h2 class="text-danger mt-3" style="font-family: tilda;">выбирают нас</h2> -->
                <h1 style="font-family: tilda;">Расчет стоимости и услуг</h1>
              </aside>
              <section>
              <div class="bg-secondary text-light d-flex align-items-center justify-content-center" style="height: 50px; font-size: large;">
                Свяжитесь с нами по телефону +7 (929) 622-48-35
              </div>
                <form method="POST" action="{% url 'index' %}" class="p-3 text-light d-flex justify-content-center flex-column align-items-center" >
                  {% csrf_token %}
                  <div class="mb-3 w-100">
                    <label for="id_name" class="text-dark">Имя</label>
                    {{ form.name }}
                  </div>
                  <div class="mb-3 w-100">
                    <label for="id_phone" class="text-dark">Телефон</label>
                    {{ form.phone }}
                  </div>
                  <div class="mb-3 w-100">
                    <label for="id_call_time" class="text-dark">Время звонка</label>
                    {{ form.call_time }}
                  </div>
                  <div class="mb-3 w-100">
                    <label for="id_address" class="text-dark">Адрес</label>
                    {{ form.address }}
                  </div>
                  <div class="mb-3 w-100">
                    <label for="id_message" class="text-dark">Техническое задание</label>
                    {{ form.message }}
                  </div>
                  <button type="submit" class="btn text-light col-4" style="background-color: sienna;">Оставить заявку</button>
                </form>
              </section>
            </aside>
            <aside class="my-4">
                <h1 style="font-family: tilda;">Последние новости</h1>
            </aside>
            <aside class="my-4">
                <h1 style="font-family: tilda;">Почему</h1>
                <h2 style="font-family: tilda;">выбирают нас</h2>
            </aside>
            <aside class="row d-flex justify-content-center">
              <div class="col-lg-4 col-10 my-2 d-flex">
                <div class="border rounded shadow-sm p-3 w-100">
                  <div class="d-flex flex-column h-100">
                    <div class="d-flex align-items-center justify-content-center pt-3">
                      <i class="bi bi-cash fs-1 text-primary"></i>
                    </div>
                    <div class="my-4 d-flex align-items-center justify-content-center fs-5 fw-bold text-center flex-shrink-0">
                      Покупка дверей без переплаты
                    </div>
                    <div class="flex-grow-1 mx-3 text-center">
                      Работая в формате интернет-магазина, мы не тратим деньги на аренду торговых площадей, что позволяет продавать вам двери по фабричным ценам. Двери Йошкар-Ола, Бульдорс, Аргус, Арма, Грофф, Интекрон, Зетта и входные блоки других надежных брендов можно купить выгодно, без наценок. Ежедневно в магазине действуют скидки и акции на популярные серии.
                    </div>
                  </div>
                </div>
              </div>
            
              <div class="col-lg-4 col-10 my-2 d-flex">
                <div class="border rounded shadow-sm p-3 w-100">
                  <div class="d-flex flex-column h-100">
                    <div class="d-flex align-items-center justify-content-center pt-3">
                      <i class="bi bi-cart fs-1 text-primary"></i>
                    </div>
                    <div class="my-4 d-flex align-items-center justify-content-center fs-5 fw-bold text-center flex-shrink-0">
                      Быстрый онлайн-заказ
                    </div>
                    <div class="flex-grow-1 mx-3 text-center">
                      Металлические двери в Москве можно приобрести не выходя из дома. Смотрите наш каталог с ценами и фото и выбирайте двери для квартиры, дачи или офиса от российских производителей. Установка дверей под ключ, гарантии. Если вы хотите узнать больше о моделях из каталога или ценах на предоставляемые услуги – позвоните нашим специалистам по телефону или заполните форму обратной связи.
                    </div>
                  </div>
                </div>
              </div>
            
              <div class="col-lg-4 col-10 my-2 d-flex">
                <div class="border rounded shadow-sm p-3 w-100">
                  <div class="d-flex flex-column h-100">
                    <div class="d-flex align-items-center justify-content-center pt-3">
                      <i class="bi bi-tag fs-1 text-primary"></i>
                    </div>
                    <div class="my-4 d-flex align-items-center justify-content-center fs-5 fw-bold text-center flex-shrink-0">
                      Цены от эконом до премиум класса
                    </div>
                    <div class="flex-grow-1 mx-3 text-center">
                      Мы работаем для клиентов с разным уровнем достатка, чтобы вы подобрали дверь, исходя из своего бюджета. Недорогие входные двери отделаны искусственной кожей, порошковым напылением, ламинатом. В среднем ценовом сегменте популярны металлические двери с декоративными панелями МДФ и шпоном. Поклонники эксклюзивного дизайна выбирают роскошную отделку натуральным массивом, ковкой, стеклом.
                    </div>
                  </div>
                </div>
              </div>
            
              <div class="col-lg-4 col-10 my-2 d-flex">
                <div class="border rounded shadow-sm p-3 w-100">
                  <div class="d-flex flex-column h-100">
                    <div class="d-flex align-items-center justify-content-center pt-3">
                      <i class="bi bi-truck fs-1 text-primary"></i>
                    </div>
                    <div class="my-4 d-flex align-items-center justify-content-center fs-5 fw-bold text-center flex-shrink-0">
                      Оперативная доставка дверей по Москве
                    </div>
                    <div class="flex-grow-1 mx-3 text-center">
                      Железные двери можно купить не только в Москве. Специалисты компании оперативно доставят изделие на фирменном транспорте в Московскую область. Время доставки по указанному адресу предварительно согласовывается с клиентом. Бонус: при заказе услуги монтажа, доставка конструкции бесплатна!
                    </div>
                  </div>
                </div>
              </div>
            
              <div class="col-lg-4 col-10 my-2 d-flex">
                <div class="border rounded shadow-sm p-3 w-100">
                  <div class="d-flex flex-column h-100">
                    <div class="d-flex align-items-center justify-content-center pt-3">
                      <i class="bi bi-shield-lock fs-1 text-primary"></i>
                    </div>
                    <div class="my-4 d-flex align-items-center justify-content-center fs-5 fw-bold text-center flex-shrink-0">
                      Прочные двери от лучших производителей
                    </div>
                    <div class="flex-grow-1 mx-3 text-center">
                      Мы не экономим на качестве и сотрудничаем только с добросовестными производителями. Двери из крепкой стали укомплектованы надежными замками, взломостойкими петлями, удобными ручками. Купить входные двери в интернет-магазине дешево со склада можно оптом и в розницу.
                    </div>
                  </div>
                </div>
              </div>
            
              <div class="col-lg-4 col-10 my-2 d-flex">
                <div class="border rounded shadow-sm p-3 w-100">
                  <div class="d-flex flex-column h-100">
                    <div class="d-flex align-items-center justify-content-center pt-3">
                      <i class="bi bi-tools fs-1 text-primary"></i>
                    </div>
                    <div class="my-4 d-flex align-items-center justify-content-center fs-5 fw-bold text-center flex-shrink-0">
                      Профессиональная установка
                    </div>
                    <div class="flex-grow-1 mx-3 text-center">
                      Специалисты «Паритет-Двери» аккуратно и бесшумно установят дверь в любой проем. Не забудьте воспользоваться бесплатной услугой «вызов замерщика», чтобы дверь точно подошла под размеры вашего проема.
                    </div>
                  </div>
                </div>
              </div>
            </aside>
            <aside>
              <h1 style="font-family: tilda;">Фильтры по категориям</h1>
            </aside>
            <aside class=" d-flex justify-content-center">
              <section class="col-6 flex-column">
                <form method="get" id="filter-form" action="{% url 'catalog' %}" class="w-100 d-flex justify-content-center">
                  <fieldset>
                    <!-- Фильтры по цене -->
                    <div class="mb-3">
                      <button class="btn text-light shadow w-100" type="button" data-bs-toggle="collapse" data-bs-target="#priceFilters" aria-expanded="false" aria-controls="priceFilters" style="background-color: #ff0000;">
                        Фильтры по цене
                      </button>
                      <div class="collapse show" id="priceFilters">
                        <div class="card card-body">
                          <input type="text" id="range-slider" value="" />
                          <input type="hidden" id="min-value" name="price_min">
                          <input type="hidden" id="max-value" name="price_max">
                        </div>
                      </div>
                    </div>
              
                    <!-- Фильтры по брендам -->
                    <div class="mb-3">
                      <button class="btn text-light shadow w-100" type="button" data-bs-toggle="collapse" data-bs-target="#brandFilters" aria-expanded="false" aria-controls="brandFilters" style="background-color: #ff0000;">
                        Фильтры по брендам
                      </button>
                      <div class="collapse show" id="brandFilters">
                        <div class="card card-body">
                          <div class="form-group">
                            {% for brand in brands %}
                              <div class="form-check">
                                <input class="form-check-input brand-checkbox" type="checkbox" value="{{ brand }}" id="brand_{{ brand|translit_slugify }}" {% if brand in selected_brands %}checked{% endif %}>
                                <label class="form-check-label" for="brand_{{ brand|translit_slugify }}">
                                  {{ brand }}
                                </label>
                              </div>
                            {% endfor %}
                          </div>
                        </div>
                      </div>
                    </div>
            
                    <!-- Фильтр по внешней отделке (out_covers) -->
                    <div class="mb-3">
                      <button class="btn text-light shadow w-100" type="button" data-bs-toggle="collapse" data-bs-target="#outCoverFilters" aria-expanded="false" aria-controls="outCoverFilters" style="background-color: #ff0000;">
                        Фильтры по внешней отделке
                      </button>
                      <div class="collapse show" id="outCoverFilters">
                        <div class="card card-body">
                          <div class="form-group">
                            {% for out_cover in out_covers %}
                              <div class="form-check">
                                <input class="form-check-input out-cover-checkbox" type="checkbox" value="{{ out_cover }}" id="out_cover_{{ out_cover|translit_slugify }}" {% if out_cover in selected_out_covers %}checked{% endif %}>
                                <label class="form-check-label" for="out_cover_{{ out_cover|translit_slugify }}">
                                  {{ out_cover }}
                                </label>
                              </div>
                            {% endfor %}
                          </div>
                        </div>
                      </div>
                    </div>
            
                    <!-- Фильтр по внутренней отделке (in_covers) -->
                    <div class="mb-3">
                      <button class="btn text-light shadow w-100" type="button" data-bs-toggle="collapse" data-bs-target="#inCoverFilters" aria-expanded="false" aria-controls="inCoverFilters" style="background-color: #ff0000;">
                        Фильтры по внутренней отделке
                      </button>
                      <div class="collapse show" id="inCoverFilters">
                        <div class="card card-body">
                          <div class="form-group">
                            {% for in_cover in in_covers %}
                              <div class="form-check">
                                <input class="form-check-input in-cover-checkbox" type="checkbox" value="{{ in_cover }}" id="in_cover_{{ in_cover|translit_slugify }}" {% if in_cover in selected_in_covers %}checked{% endif %}>
                                <label class="form-check-label" for="in_cover_{{ in_cover|translit_slugify }}">
                                  {{ in_cover }}
                                </label>
                              </div>
                            {% endfor %}
                          </div>
                        </div>
                      </div>
                    </div>
            
                    <!-- Фильтр по назначению (purpose) -->
                    <div class="mb-3">
                      <button class="btn text-light shadow w-100" type="button" data-bs-toggle="collapse" data-bs-target="#purposeFilters" aria-expanded="false" aria-controls="purposeFilters" style="background-color: #ff0000;">
                        Фильтры по назначению
                      </button>
                      <div class="collapse show" id="purposeFilters">
                        <div class="card card-body">
                          <div class="form-group">
                            {% for purpose in purposes %}
                              <div class="form-check">
                                <input class="form-check-input purpose-checkbox" type="checkbox" value="{{ purpose }}" id="purpose_{{ purpose|translit_slugify }}" {% if purpose in selected_purposes %}checked{% endif %}>
                                <label class="form-check-label" for="purpose_{{ purpose|translit_slugify }}">
                                  {{ purpose }}
                                </label>
                              </div>
                            {% endfor %}
                          </div>
                        </div>
                      </div>
                    </div>
              
                    <!-- Скрытые поля для объединённых значений -->
                    <input type="hidden" name="brand" id="brand-field">
                    <input type="hidden" name="purpose" id="purpose-field">
                    <input type="hidden" name="out_covers" id="out-cover-field">
                    <input type="hidden" name="in_covers" id="in-cover-field">
              
                    <!-- Кнопки для применения и сброса фильтров -->
                     <div class="d-flex justify-content-center">
                      <button class="btn btn-outline-danger m-1" type="submit">Найти нужную дверь</button>
                    </div>
                  </fieldset>
                </form>
              </section>
            </aside>
            <aside class="my-4">
              <h1 style="font-family: tilda;">Популярные категории</h1>
              <div class="row">
                {% for catalog in random_catalogs %}
                  <div class="col-lg-3 col-6 door-item d-flex flex-column" data-price="{{ door.price }}" data-orders="{{ door.get_order_count }}" data-novelty="{{ door.id }}">
                    <img src="{{ MEDIA_URL }}{{ catalog.image }}" class="img-fluid rounded-4" alt="{{ door.title }} - Image {{ forloop.counter }}" style="height: 100%;  object-fit: cover;">
                    <article class="d-flex flex-column mt-2">
                      <label class="fw-bold" style="font-size: small;">
                        {{ catalog.title }}
                      </label>
                      <label class="text-secondary" style="font-size: small;">
                        {{ catalog.get_door_count }} шт.
                      </label>
                    </article>
                  </div>
                {% endfor %}
                <section class="d-flex justify-content-center flex-lg-row flex-column">
                  <a href="{% url 'catalog' %}" class="btn m-3 rounded-pill text-light btn-lg fw-bold px-3" style="background-color: blue;">Каталог металлических дверей</a>
                  <a href="{% url 'calculator' %}" class="btn m-3 rounded-pill text-light btn-lg fw-bold px-3" style="background-color: sienna;">Изготовление дверей на заказ</a>
                </section>
              </div>
            </aside>
            <aside class="my-4">
                <!-- <h1 class="text-white px-4 bg-dark rounded d-inline" style="font-family: tilda;">Найдите нас</h1>
                <h2 class=" mt-3 text-danger" style="font-family: tilda;">На карте</h2> -->
                <h1 style="font-family: tilda;">Найдите нас</h1>
                <h2 style="font-family: tilda;">На карте</h2>
            </aside>
            <aside id="map" class="d-flex justify-content-center">
            </aside>
            <aside class="my-4">
              <!-- <h1 class="text-white px-4 bg-dark rounded d-inline" style="font-family: tilda;">Найдите нас</h1>
              <h2 class=" mt-3 text-danger" style="font-family: tilda;">На карте</h2> -->
              <h1 style="font-family: tilda;">Как оформить заказ</h1>
          </aside>
          <aside class="row shadow p-3 mb-5 bg-body-tertiary rounded d-flex flex-lg-row flex-column">
            <div class="col d-flex flex-column justify-content-center border-end-lg text-center">
              <p class="fs-5 fw-bold">Позвоните нам по телефону</p>
              <p class="fs-6 text-secondary">Наш телефон: +7 (929) 622-48-35
                Время приёма заявок: 08:00-20:00, без выходных</p>
            </div>
            <div class="col d-flex flex-column justify-content-center text-center">
              <p class="fs-5 fw-bold">Оставьте заявку на сайте</p>
              <p class="fs-6 text-secondary">Выберите дверь из каталога, заполните заявку, мы с вами свяжемся</p>
            </div>
            <div class="col d-flex flex-column justify-content-center border-start-lg text-center">
              <p class="fs-5 fw-bold">Свяжитесь с нами в мессенджере</p>
              <p class="fs-6 text-secondary">Начните чат в WhatsApp или Telegramm</p>
            </div>
          </aside>
          <aside class="my-4">
            <!-- <h1 class="text-white px-4 bg-dark rounded d-inline" style="font-family: tilda;">Почему</h1>
            <h2 class="text-danger mt-3" style="font-family: tilda;">выбирают нас</h2> -->
            <h1 style="font-family: tilda;">Отзывы о нас</h1>
          </aside>
          <aside class="container my-5">
            <div class="row">
                {% for review in reviews %}
                    <div class="col-lg-6 mb-4">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5 class="card-title">{{ review.name }}</h5>
                                {% if review.message %}<h6 class="card-subtitle mb-2 text-muted">{{ review.message }}</h6>{% endif %}
                                <p class="card-text">
                                    {% for i in range %}
                                        {% if i <= review.rating|divisibleby:2 %}
                                            <i class="bi bi-star-fill text-warning"></i>
                                        {% elif i == review.rating|add:1|divisibleby:2 %}
                                            <i class="bi bi-star-half text-warning"></i> <!-- Полузаполненная звезда -->
                                        {% else %}
                                            <i class="bi bi-star text-muted"></i> <!-- Пустая звезда -->
                                        {% endif %}
                                    {% endfor %}
                                    <!-- <span class="fw-bold">{{ review.rating }}/10</span> -->
                                </p>
                            </div>
                        </div>
                    </div>
                {% empty %}
                    <p>Пока нет отзывов</p>
                {% endfor %}
            </div>
          </div>
        </div>
        
        
        <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
        <script>
            ymaps.ready(function () {
                var map = new ymaps.Map("map", {
                    center: [55.88471, 37.60377], // Центр карты (широта, долгота)
                    zoom: 15 // 
                });
    
                var placemark = new ymaps.Placemark([55.88471, 37.60377], {
                    balloonContent: 'Паритет'
                });
    
                map.geoObjects.add(placemark);
            });
        </script>
        <script>
          // Объединение значений чекбоксов в строку перед отправкой формы
          document.getElementById('filter-form').addEventListener('submit', function(event) {
            // Бренды
            const checkedBrands = document.querySelectorAll('.brand-checkbox:checked');
            const selectedBrands = Array.from(checkedBrands).map(cb => cb.value).join(',');
            document.getElementById('brand-field').value = selectedBrands;

            // Внешняя отделка (out_covers)
            const checkedOutCovers = document.querySelectorAll('.out-cover-checkbox:checked');
            const selectedOutCovers = Array.from(checkedOutCovers).map(cb => cb.value).join(',');
            document.getElementById('out-cover-field').value = selectedOutCovers;

            // Внутренняя отделка (in_covers)
            const checkedInCovers = document.querySelectorAll('.in-cover-checkbox:checked');
            const selectedInCovers = Array.from(checkedInCovers).map(cb => cb.value).join(',');
            document.getElementById('in-cover-field').value = selectedInCovers;

            // Назначение
            const checkedPurposes = document.querySelectorAll('.purpose-checkbox:checked');
            const selectedPurposes = Array.from(checkedPurposes).map(cb => cb.value).join(',');
            document.getElementById('purpose-field').value = selectedPurposes;
          });
        </script>
        <script>
          var minValue = {{ min_price|default:"0" }};
          var maxValue = {{ max_price|default:"1000" }};
          $(document).ready(function() {
              $("#range-slider").ionRangeSlider({
                  type: "double",
                  min: 0,
                  max: maxValue,
                  from: minValue,
                  to: maxValue,
                  grid: true,
                  skin: "flat",
                  postfix: '₽',
                  onFinish: function (data) {
                      $("#min-value").val(data.from);
                      $("#max-value").val(data.to);
                  }
              });
          });
        </script>
        {% endblock %}
        </div>
    </main>
    <!-- Включение footer -->
    {% include 'footer/footer.html' %}

</body>
</html>
