{% extends '../index.html' %}
{% load custom_filters %}
{% load static %}
{% load thumbnail %}

<link rel="canonical" href="/catalog/" />
{% if catalog %}
  {% block description %}
    {% if not catalog.description %} 
      <meta name="description" content="–ö—É–ø–∏—Ç—å –≤—Ö–æ–¥–Ω—ã–µ –∂–µ–ª–µ–∑–Ω—ã–µ –¥–≤–µ—Ä–∏ {% if catalog %}{{ catalog.title }}{% endif %} –≤ –∫–≤–∞—Ä—Ç–∏—Ä—É, –¥–æ—Å—Ç–∞–≤–∫–∞, –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ –∑–∞–∫–∞–∑ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≥–æ—Ç–æ–≤—ã—Ö –≤—Ö–æ–¥–Ω—ã—Ö –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏—Ö –¥–≤–µ—Ä–µ–π  –≤ –ú–æ—Å–∫–≤–µ –≤ –∫–≤–∞—Ä—Ç–∏—Ä—É –∏ –∑–∞–≥–æ—Ä–æ–¥–Ω—ã–π –¥–æ–º. –ö–∞—Ç–∞–ª–æ–≥ —Å —Ñ–æ—Ç–æ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º. –ì–∞—Ä–∞–Ω—Ç–∏—è –Ω–∞ –¥–≤–µ—Ä–∏ 1 –≥–æ–¥. –ê–∫—Ü–∏–∏ –∏ —Å–∫–∏–¥–∫–∏.">
    {% else %}
      <meta name="description" content="{{ catalog.description }}">
    {% endif %}
  {% endblock %}
{% endif %}

{% block title %}
  {% if catalog %}
    {% if catalog.custom_title %}
      {{ catalog.custom_title }}
    {% else %}
      –ö—É–ø–∏—Ç—å –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–≤–µ—Ä–∏ {{ catalog.title }} –≤ –ú–æ—Å–∫–≤–µ —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –ø–æ —Ü–µ–Ω–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è
    {% endif %}
  {% else %}
      –ó–∞–∫–∞–∑–∞—Ç—å –≤—Ö–æ–¥–Ω—ã–µ –∂–µ–ª–µ–∑–Ω—ã–µ –¥–≤–µ—Ä–∏ –≤ –∫–≤–∞—Ä—Ç–∏—Ä—É üõí –≤ –ú–æ—Å–∫–≤–µ –ø–æ –Ω–∏–∑–∫–∏–º —Ü–µ–Ω–∞–º ‚ö° –≤ –Ω–∞—à–µ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –º–∞–≥–∞–∑–∏–Ω–µ. üöö  –¥–æ—Å—Ç–∞–≤–∫–∞ –∏ üõ†Ô∏è —É—Å—Ç–∞–Ω–æ–≤–∫a.
  {% endif %}
{% endblock %}

{% block keywords %}
{% endblock %}
{% block content %}

<style>
  .btn-light:hover {
      background-color: #ffdae0; /* –†–æ–∑–æ–≤—ã–π —Ü–≤–µ—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
      border-color: #ffc0cb; /* –†–æ–∑–æ–≤–∞—è —Ä–∞–º–∫–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
      color: #fff; /* –ë–µ–ª—ã–π —Ç–µ–∫—Å—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
  }
</style>
<script>
var minValue = {{ min_price|default:"0" }};
var maxValue = {{ max_price|default:"1000" }};
$(document).ready(function() {
    $("#range-slider").ionRangeSlider({
        type: "double",
        min: 0,
        max: maxValue,
        from: minValue,
        to: maxValue,
        grid: true,
        skin: "flat",
        postfix: '‚ÇΩ',
        onFinish: function (data) {
            $("#min-value").val(data.from);
            $("#max-value").val(data.to);
        }
    });
});
</script>
<style>
  .strikethrough-svg {
      position: relative;
      display: inline-block;
      font-size: large;
      color: #ff0000;
  }
  .strikethrough-svg svg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
  }
  .strikethrough-svg span {
      position: relative;
      z-index: 1;
  }
  .card {
    display: flex;
    flex-direction: column;
    height: 100%;
  }

  .card-body {
    flex: 1; /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å—ë –¥–æ—Å—Ç—É–ø–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ */
    display: flex;
    flex-direction: column;
    justify-content: space-between; /* –†–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã —Ç–∞–∫, —á—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∞ –±—ã–ª–∞ –≤–Ω–∏–∑—É */
  }

  @media (max-width: 992px) {
    .image-container {
      
    }
  }
  @media (min-width: 992px) { 
  .border-end-lg {
    border-right: 1px solid #ced4da;
  }
  .border-start-lg {
    border-left: 1px solid #ced4da;
  }
}
</style>

<nav aria-label="breadcrumb" class="mt-3">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a class="link-dark" href="{% url 'index' %}">–ì–ª–∞–≤–Ω–∞—è</a></li>
    <li class="breadcrumb-item active" aria-current="page">–ö–∞—Ç–∞–ª–æ–≥</li>
  </ol>
</nav>
{% if catalog %}
<h1 text-center my-4">{{ catalog.custom_h1 }}</h1>
{% else %}
<h1 class="text-center my-4">–í—Ö–æ–¥–Ω—ã–µ –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–µ –¥–≤–µ—Ä–∏ –≤ –ú–æ—Å–∫–≤–µ</h1>
{% endif %}
<section class="row flex-lg-row flex-column">
  <section class="col-lg-4 col-12">
    <form method="get" id="filter-form" action="{% url 'catalog' %}">
      <fieldset>
        <legend>–§–∏–ª—å—Ç—Ä—ã</legend>
        <!-- –§–∏–ª—å—Ç—Ä—ã –ø–æ —Ü–µ–Ω–µ -->
        <div class="mb-3">
          <button class="btn text-light shadow w-100" type="button" data-bs-toggle="collapse" data-bs-target="#priceFilters" aria-expanded="false" aria-controls="priceFilters" style="background-color: #ff0000;">
            –§–∏–ª—å—Ç—Ä—ã –ø–æ —Ü–µ–Ω–µ
          </button>
          <div class="collapse show" id="priceFilters">
            <div class="card card-body">
              <input type="text" id="range-slider" value="" />
              <input type="hidden" id="min-value" name="price_min">
              <input type="hidden" id="max-value" name="price_max">
            </div>
          </div>
        </div>
  
        <!-- –§–∏–ª—å—Ç—Ä—ã –ø–æ –±—Ä–µ–Ω–¥–∞–º -->
        <div class="mb-3">
          <button class="btn text-light shadow w-100 text-light" type="button" data-bs-toggle="collapse" data-bs-target="#brandFilters" aria-expanded="false" aria-controls="brandFilters" style="background-color: #ff0000;">
            –§–∏–ª—å—Ç—Ä—ã –ø–æ –±—Ä–µ–Ω–¥–∞–º
          </button>
          <div class="collapse " id="brandFilters">
            <div class="card card-body">
              <div class="form-group">
                {% for brand in brands %}
                  <div class="form-check">
                    <input class="form-check-input brand-checkbox" type="checkbox" value="{{ brand }}" id="brand_{{ brand|translit_slugify }}" {% if brand in selected_brands %}checked{% endif %}>
                    <label class="form-check-label" for="brand_{{ brand|translit_slugify }}">
                      {{ brand }}
                    </label>
                  </div>
                {% endfor %}
              </div>
            </div>
          </div>
        </div>

        <!-- –§–∏–ª—å—Ç—Ä –ø–æ –≤–Ω–µ—à–Ω–µ–π –æ—Ç–¥–µ–ª–∫–µ (out_covers) -->
        <div class="mb-3">
          <button class="btn text-light shadow w-100" type="button" data-bs-toggle="collapse" data-bs-target="#outCoverFilters" aria-expanded="false" aria-controls="outCoverFilters" style="background-color: #ff0000;">
            –§–∏–ª—å—Ç—Ä—ã –ø–æ –≤–Ω–µ—à–Ω–µ–π –æ—Ç–¥–µ–ª–∫–µ
          </button>
          <div class="collapse " id="outCoverFilters">
            <div class="card card-body">
              <div class="form-group">
                {% for out_cover in out_covers %}
                  <div class="form-check">
                    <input class="form-check-input out-cover-checkbox" type="checkbox" value="{{ out_cover }}" id="out_cover_{{ out_cover|translit_slugify }}" {% if out_cover in selected_out_covers %}checked{% endif %}>
                    <label class="form-check-label" for="out_cover_{{ out_cover|translit_slugify }}">
                      {{ out_cover }}
                    </label>
                  </div>
                {% endfor %}
              </div>
            </div>
          </div>
        </div>

        <!-- –§–∏–ª—å—Ç—Ä –ø–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –æ—Ç–¥–µ–ª–∫–µ (in_covers) -->
        <div class="mb-3">
          <button class="btn text-light shadow w-100" type="button" data-bs-toggle="collapse" data-bs-target="#inCoverFilters" aria-expanded="false" aria-controls="inCoverFilters" style="background-color: #ff0000;">
            –§–∏–ª—å—Ç—Ä—ã –ø–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –æ—Ç–¥–µ–ª–∫–µ
          </button>
          <div class="collapse " id="inCoverFilters">
            <div class="card card-body">
              <div class="form-group">
                {% for in_cover in in_covers %}
                  <div class="form-check">
                    <input class="form-check-input in-cover-checkbox" type="checkbox" value="{{ in_cover }}" id="in_cover_{{ in_cover|translit_slugify }}" {% if in_cover in selected_in_covers %}checked{% endif %}>
                    <label class="form-check-label" for="in_cover_{{ in_cover|translit_slugify }}">
                      {{ in_cover }}
                    </label>
                  </div>
                {% endfor %}
              </div>
            </div>
          </div>
        </div>

        <!-- –§–∏–ª—å—Ç—Ä –ø–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—é (purpose) -->
        <div class="mb-3">
          <button class="btn text-light shadow w-100" type="button" data-bs-toggle="collapse" data-bs-target="#purposeFilters" aria-expanded="false" aria-controls="purposeFilters" style="background-color: #ff0000;">
            –§–∏–ª—å—Ç—Ä—ã –ø–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—é
          </button>
          <div class="collapse " id="purposeFilters">
            <div class="card card-body">
              <div class="form-group">
                {% for purpose in purposes %}
                  <div class="form-check">
                    <input class="form-check-input purpose-checkbox" type="checkbox" value="{{ purpose }}" id="purpose_{{ purpose|translit_slugify }}" {% if purpose in selected_purposes %}checked{% endif %}>
                    <label class="form-check-label" for="purpose_{{ purpose|translit_slugify }}">
                      {{ purpose }}
                    </label>
                  </div>
                {% endfor %}
              </div>
            </div>
          </div>
        </div>
  
        <!-- –°–∫—Ä—ã—Ç—ã–µ –ø–æ–ª—è –¥–ª—è –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π -->
        <input type="hidden" name="brand" id="brand-field">
        <input type="hidden" name="purpose" id="purpose-field">
        <input type="hidden" name="out_covers" id="out-cover-field">
        <input type="hidden" name="in_covers" id="in-cover-field">
  
        <!-- –ö–Ω–æ–ø–∫–∏ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏ —Å–±—Ä–æ—Å–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ -->
         <div class="d-flex justify-content-center">
          <button class="btn btn-outline-danger m-1" type="submit">–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
          <button class="btn btn-outline-danger m-1" type="button" id="reset-filters">–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
        </div>
      </fieldset>
    </form>
  </section>
  
  <aside class="col-lg-8 col-12">
    <section class="row d-flex flex-row mt-2">
      <div class="tags-cloud d-flex flex-wrap">
          <label class="text-center" style="font-size: 15px;">–û—Å–Ω–æ–≤–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: </label>
          {% for tag in tags_cloud %}
          <a href="{% url 'catalog_with_slug' tag.slug %}" class="btn btn-light link-underline link-underline-opacity-0 px-2 py-0 mx-1 mb-2" style="color: #000; font-size: 15px; border: 1px solid #ddd;">{{ tag.title }}</a>
          {% endfor %}
      </div>
    </section>
    <section class="row d-flex flex-row mt-2">
      <div class="tags-cloud d-flex flex-wrap">
        {% if catalog %}{{ catalog.content|safe }}{% endif %}
      </div>
    </section>
    {% if not catalog %}
    <div class="editor"><p>–í—Ö–æ–¥–Ω—ã–µ –¥–≤–µ—Ä–∏ &mdash; –Ω–µ–æ—Ç—ä–µ–º–ª–µ–º–∞—è —á–∞—Å—Ç—å –∂–∏–ª–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞, —ç–ª–µ–º–µ–Ω—Ç –≤—Ö–æ–¥–Ω–æ–π –≥—Ä—É–ø–ø—ã, –Ω–∞–¥–µ–∂–Ω–∞—è –∑–∞—â–∏—Ç–∞ –∫–≤–∞—Ä—Ç–∏—Ä—ã –æ—Ç –ø–æ—Å—è–≥–∞—Ç–µ–ª—å—Å—Ç–≤. –ö –≤—ã–±–æ—Ä—É —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–≤–µ—Ä–µ–π —Å—Ç–æ–∏—Ç –æ—Ç–Ω–µ—Å—Ç–∏—Å—å –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏ –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç —à–∏—Ä–æ–∫–∏–π –≤—ã–±–æ—Ä –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –¥–ª—è –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –¥–≤–µ—Ä–µ–π. –í –∏—Ö —á–∏—Å–ª–µ –ø–ª–∞—Å—Ç–∏–∫, –¥–µ—Ä–µ–≤–æ –∏ –º–µ—Ç–∞–ª–ª, –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–∞—Ç–µ—Ä–∏–∞–ª –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–ø—É–ª—è—Ä–µ–Ω –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ –∫—Ä–∞—Å–∏–≤—ã—Ö –¥–≤–µ—Ä–Ω—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.</p>

      <h3>–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å—Ç–∞–ª—å–Ω—ã—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–≤–µ—Ä–µ–π</h3>
      
      <p>–û–¥–Ω–æ –∏–∑ –≥–ª–∞–≤–Ω—ã—Ö –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤ –¥–≤–µ—Ä–µ–π, –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∏–∑ –º–µ—Ç–∞–ª–ª–∞, –∏—Ö –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å, –∫—Ä–æ–º–µ —Ç–æ–≥–æ, –æ–Ω–∏ –æ–±–ª–∞–¥–∞—é—Ç –∏ –¥—Ä—É–≥–∏–º–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞–º–∏:</p>
      
      <ul>
       <li>—Å–ª—É–∂–∞—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–µ—Å—è—Ç–∫–æ–≤ –ª–µ—Ç, –Ω–∞–¥–µ–∂–Ω–æ –∑–∞—â–∏—â–∞—è –∫–≤–∞—Ä—Ç–∏—Ä—ã –∏ –¥–æ–º–∞ –æ—Ç –≤–∑–ª–æ–º–æ–≤;</li>
       <li>–≤—Ö–æ–¥–Ω—ã–µ –¥–≤–µ—Ä–∏ –º–æ–∂–Ω–æ –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ —Å —à—É–º–æ–∏–∑–æ–ª—è—Ü–∏–µ–π, –ø–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –∑–≤—É–∫–∏ –≤ –∫–≤–∞—Ä—Ç–∏—Ä—É –Ω–µ –ø—Ä–æ–Ω–∏–∫–∞—é—Ç;</li>
       <li>–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ –∏–∑–≥–æ—Ç–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –æ–¥–Ω–æ—Å—Ç–≤–æ—Ä—á–∞—Ç—ã–µ –∏ –¥–≤—É—Å—Ç–≤–æ—Ä—á–∞—Ç—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏;</li>
       <li>—ç—Ç–æ –≥–µ—Ä–º–µ—Ç–∏—á–Ω–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, —Å–æ—Ö—Ä–∞–Ω—è—é—â–∞—è —Ç–µ–ø–ª–æ, —Å–∫–≤–æ–∑–Ω—è–∫–∏ –∏ –ø—Ä–æ–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–µ —Ö–æ–ª–æ–¥–∞ –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è;</li>
       <li>–≤–æ–∑–º–æ–∂–Ω–æ –∏–∑–≥–æ—Ç–æ–≤–∏—Ç—å –Ω–∞ –∑–∞–∫–∞–∑ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–º –Ω–µ —Å—Ç—Ä–∞—à–Ω—ã –≤–∑–ª–æ–º—ã;</li>
       <li>–ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –±–æ–ª—å—à–æ–π –≤—ã–±–æ—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π –ø–æ –æ—Ç–¥–µ–ª–∫–µ &mdash; —á–µ—Ä–Ω—ã–µ, —Å–≤–µ—Ç–ª—ã–µ, —Å–µ—Ä—ã–µ, —Ç–µ–º–Ω—ã—Ö –æ—Ç—Ç–µ–Ω–∫–æ–≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.</li>
      </ul>
      
      <p>–ö—É–ø–∏—Ç—å –≤—Ö–æ–¥–Ω—É—é –¥–≤–µ—Ä—å –º–æ–∂–Ω–æ —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π, –º–∞—Å—Ç–µ—Ä –ø—Ä–∏–µ–¥–µ—Ç –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∑–∞–º–µ—Ä, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –¥–≤–µ—Ä—å —Å —É—á–µ—Ç–æ–º —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫.</p>
    {% endif %}
    <!-- </div> -->
    <p class="my-4 col text-center">–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ:</p>
    <div class="d-flex flex-lg-row align-items-center my-3">
      <!-- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –Ω–æ–≤–∏–∑–Ω–µ -->
      <button class="btn text-light col h-50 mt-lg-0 mt-2 w-100 rounded-pill" style="background-color: crimson;" onclick="sortItems('novelty')">
        –ù–æ–≤–∏–∑–Ω–µ <span id="novelty-sort-symbol">‚áÖ</span>
      </button>
      <!-- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ü–µ–Ω–µ -->
      <button class="btn text-light col h-50 mt-lg-0 mt-2 w-100 mx-2 rounded-pill" style="background-color: crimson;" onclick="sortItems('price')">
        –¶–µ–Ω–µ <span id="price-sort-symbol">‚áÖ</span>
      </button>
      <!-- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∑–∞–∫–∞–∑–∞–º -->
      <button class="btn text-light col h-50 mt-lg-0 mt-2 w-100 rounded-pill" style="background-color: crimson;"  onclick="sortItems('orders')">
        –ó–∞–∫–∞–∑–∞–º <span id="orders-sort-symbol">‚áÖ</span>
      </button>
    </div>
  
    <div class="row" id="door-list">
      {% for door in doors %}
      <div class="col-lg-6 col-12 mt-lg-0 mt-4 mb-4 door-item" data-price="{{ door.price }}" data-orders="{{ door.get_order_count }}" data-novelty="{{ door.id }}">
        <div class="card h-100">
          <section class="d-flex align-items-center p-2" data-bs-ride="false" style="height: 450px; overflow: hidden;">
            <div class="position-absolute d-flex flex-column" style="top: 10px; z-index: 2;">
                {% for tag in door.tags.all %}
                    <span class="badge rounded-pill text-{{ tag.text_color }} mx-auto" style="background-color: {{ tag.color_hex }}; margin-bottom: 5px;">{{ tag.title }}</span>
                {% endfor %}
            </div>
            <div class="d-flex flex-row flex-wrap align-items-start" style="width: 100%;">
                {% with door.images|split_and_get_all as image_urls %}
                    {% for image_url in image_urls %}
                        <div class="image-container" style="flex: 1 1 calc(33.33% - 10px); margin: 5px; height: 360px; overflow: hidden;">
                          <a href="{% url 'door_detail' slug=door.slug %}" onclick="addToViewed('{{ door.title }}', '{{ door.images|split_and_get_all|escapejs }}', '{{ door.price }}', '{{ door.slug }}')"><img src="{{ MEDIA_URL }}{{ image_url }}" class="img-fluid" alt="{{ door.title }} - Image {{ forloop.counter }}" style="height: 100%; width: 100%; object-fit: contain;"></a>
                        </div>
                    {% endfor %}
                {% endwith %}
            </div>
          </section>
          
        <section class="card-body">
          <a href="{% url 'door_detail' slug=door.slug %}" onclick="addToViewed('{{ door.title }}', '{{ door.images|split_and_get_all|escapejs }}', '{{ door.price }}', '{{ door.slug }}')"><p class="card-title fw-bold">{{ door.title }}</p></a>
          {% if door.discount %}
          <label class="rounded p-2" style="background-color: #ffe5e5; font-family: gasalt;">
              {% with result=door.price|calculate_discount:door.discount %}
                  <div class="position-absolute d-flex flex-column" style="bottom: 40%; z-index: 2; right: 10px;">
                      {% if door.discount %}
                          <span class="badge rounded-pill bg-danger text-white mx-auto" style="margin-bottom: 5px; font-size: 15px;"><i class="bi bi-plus-circle-fill me-2"></i>{{ result.discount_amount }} ‚ÇΩ</span>
                      {% endif %}
                  </div>
                  <label class="card-text rounded" style="color: #ff0000;">{{ result.final_price }} ‚ÇΩ</label>
                  <label class="card-text rounded text-secondary strikethrough-svg" style="font-size: small;">
                      <span>{{ door.price|format_number }} ‚ÇΩ</span>
                      <svg viewBox="0 0 100 100">
                          <line x1="-150" y1="0" x2="150" y2="80" stroke="#ff0000" stroke-width="4"/>
                      </svg>
                  </label>
                  <label class="card-text rounded bg-danger text-white p-1" style="font-size: x-small;">-{{ door.discount }}%</label>
              {% endwith %}
          </label>
      {% else %}
          <label class="card-text p-2 rounded text-dark" style="font-family: gasalt;">{{ door.price|format_number }} ‚ÇΩ</label>
      {% endif %}
      
          <label class="card-text text-secondary pb-3 mt-auto">{{ door.size_name }}</label>
          <div class="d-flex flex-lg-row flex-column mt-auto align-items-center justify-content-center w-100" style="gap: 5px;">
            <a href="{% url 'door_detail' slug=door.slug %}" class="flex-grow-1 w-100">
                <button class="btn btn-outline-danger fw-bold btn-sm w-100" 
                        onclick="addToViewed('{{ door.title }}', '{{ door.images|split_and_get_all|escapejs }}', '{{ door.price }}', '{{ door.slug }}')">
                    –£–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ
                </button>
            </a>        
            <div class="flex-grow-1 w-100">
                <button class="btn btn-outline-danger fw-bold btn-sm w-100" data-bs-toggle="modal" data-bs-target="#requestModal">
                    –ö—É–ø–∏—Ç—å –≤ 1 –∫–ª–∏–∫
                </button>
            </div>
        </div>
        <div class="row d-flex flex-row">
            <button onclick="addToCompare({{ door.id }})" class="btn col">
                <i class="bi bi-bar-chart-fill" style="color: #ff0000; font-size: large;"> –°—Ä–∞–≤–Ω–∏—Ç—å</i>
            </button>
            <button onclick="addToCart('{{ door.title }}', '{{ door.images }}', {{ door.price }})" class="btn col">
              <i class="bi bi-basket2-fill" style="color: #ff0000; font-size: large;"> –í –∫–æ—Ä–∑–∏–Ω—É</i>
            </button>
        </div>
        
        </section>
        </div>
      </div>
      {% endfor %}
    </div>
    <section class="row d-flex flex-row mt-2">
      <div class="tags-cloud d-flex flex-wrap">
          <label class="text-center" style="font-size: 15px;">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è–º: </label>
          {% for tag in tags_cloud_extends %}
          <a href="{% url 'catalog_with_slug' tag.slug %}" class="btn btn-light link-underline link-underline-opacity-0 px-2 py-0 mx-1 mb-2" style="color: #000; font-size: 15px; border: 1px solid #ddd;">{{ tag.title }}</a>
          {% endfor %}
      </div>
    </section>

    <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
    <nav aria-label="Page navigation" class="mt-2">
      <ul class="pagination flex-wrap justify-content-center">
        <!-- –ö–Ω–æ–ø–∫–∞ "–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞" –∏ "–ü—Ä–µ–¥—ã–¥—É—â–∞—è" -->
        {% if doors.has_previous %}
          <li class="page-item">
            <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page=1" aria-label="First">
              <span aria-hidden="true">&laquo;</span>
            </a>
          </li>
          <li class="page-item">
            <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ doors.previous_page_number }}" aria-label="Previous">
              <span aria-hidden="true">&lsaquo;</span>
            </a>
          </li>
        {% endif %}
    
        <!-- –õ–æ–≥–∏–∫–∞ –¥–ª—è –º–Ω–æ–≥–æ—Ç–æ—á–∏–π –≤ –Ω–∞—á–∞–ª–µ -->
        {% if doors.number > 3 %}
          <li class="page-item">
            <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page=1">1</a>
          </li>
          {% if doors.number > 4 %}
            <li class="page-item disabled">
              <span class="page-link">...</span>
            </li>
          {% endif %}
        {% endif %}
    
        <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü –≤–æ–∫—Ä—É–≥ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
        {% for num in doors.paginator.page_range %}
          {% if num <= doors.number|add:2 and num >= doors.number|add:-2 %}
            {% if doors.number == num %}
              <li class="page-item active">
                <span class="page-link">{{ num }}</span>
              </li>
            {% else %}
              <li class="page-item">
                <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ num }}">{{ num }}</a>
              </li>
            {% endif %}
          {% endif %}
        {% endfor %}
    
        <!-- –õ–æ–≥–∏–∫–∞ –¥–ª—è –º–Ω–æ–≥–æ—Ç–æ—á–∏–π –≤ –∫–æ–Ω—Ü–µ -->
        {% if doors.number < doors.paginator.num_pages|add:-2 %}
          {% if doors.number < doors.paginator.num_pages|add:-3 %}
            <li class="page-item disabled">
              <span class="page-link">...</span>
            </li>
          {% endif %}
          <li class="page-item">
            <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ doors.paginator.num_pages }}">{{ doors.paginator.num_pages }}</a>
          </li>
        {% endif %}
    
        <!-- –ö–Ω–æ–ø–∫–∞ "–°–ª–µ–¥—É—é—â–∞—è" –∏ "–ü–æ—Å–ª–µ–¥–Ω—è—è" -->
        {% if doors.has_next %}
          <li class="page-item">
            <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ doors.next_page_number }}" aria-label="Next">
              <span aria-hidden="true">&rsaquo;</span>
            </a>
          </li>
          <li class="page-item">
            <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ doors.paginator.num_pages }}" aria-label="Last">
              <span aria-hidden="true">&raquo;</span>
            </a>
          </li>
        {% endif %}
      </ul>
    </nav>
  
    <section class="modal fade" id="requestModal" tabindex="-1" aria-labelledby="requestModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
              <div class="modal-header">
                  <h5 class="modal-title" id="requestModalLabel">–§–æ—Ä–º–∞ –∑–∞—è–≤–∫–∏</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                  <form method="POST" action="{% url 'catalog' %}">
                      {% csrf_token %}
                      <div class="mb-3">
                          <label for="id_name" class="form-label">–ò–º—è</label>
                          {{ form.name }}
                      </div>
                      <div class="mb-3">
                          <label for="id_phone" class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                          {{ form.phone }}
                      </div>
                      <div class="mb-3">
                          <label for="id_call_time" class="form-label">–í—Ä–µ–º—è –∑–≤–æ–Ω–∫–∞</label>
                          {{ form.call_time }}
                      </div>
                      <div class="mb-3">
                          <label for="id_address" class="form-label">–ê–¥—Ä–µ—Å</label>
                          {{ form.address }}
                      </div>
                      <div class="mb-3">
                          <label for="id_message" class="form-label">–°–æ–æ–±—â–µ–Ω–∏–µ</label>
                          {{ form.message }}
                      </div>
                      <button type="submit" class="btn btn-danger">–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
                  </form>
              </div>
          </div>
      </div>
    </section>
  </aside>
</section>
<script>
  let currentSort = '';  // To track current sorted field
  let sortDirection = 'asc'; // Default sort direction
  
  function sortItems(sortBy) {
      const doorList = document.getElementById('door-list');
      const doors = Array.from(doorList.getElementsByClassName('door-item'));
  
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö
      const sortSymbols = {
          novelty: document.getElementById('novelty-sort-symbol'),
          price: document.getElementById('price-sort-symbol'),
          orders: document.getElementById('orders-sort-symbol')
      };
  
      // –°–±—Ä–æ—Å —Å–∏–º–≤–æ–ª–æ–≤
      for (let key in sortSymbols) {
          if (sortSymbols[key]) {
              sortSymbols[key].innerHTML = '‚áÖ';
          }
      }
  
      // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–∞ –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–µ
      if (sortDirection === 'asc') {
          if (sortSymbols[sortBy]) {
              sortSymbols[sortBy].innerHTML = '‚Üë';
          }
      } else {
          if (sortSymbols[sortBy]) {
              sortSymbols[sortBy].innerHTML = '‚Üì';
          }
      }
  
      // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
      doors.sort((a, b) => {
          let aValue = a.dataset[sortBy] || '';
          let bValue = b.dataset[sortBy] || '';
  
          // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —á–∏—Å–ª–∞ –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —á–∏—Å–ª–æ–≤–æ–µ
          if (sortBy === 'price' || sortBy === 'orders') {
              aValue = parseFloat(aValue) || 0;
              bValue = parseFloat(bValue) || 0;
          }
  
          if (sortDirection === 'asc') {
              return aValue > bValue ? 1 : -1;
          } else {
              return aValue < bValue ? 1 : -1;
          }
      });
  
      // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
      if (currentSort === sortBy) {
          sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';
      } else {
          sortDirection = 'asc'; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –Ω–æ–≤–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é
      }
  
      currentSort = sortBy;
  
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ DOM
      doors.forEach(door => doorList.appendChild(door));
      console.log('Data for sorting:', doors.map(door => ({
    id: door.id,
    price: door.dataset.price,
    orders: door.dataset.orders,
    novelty: door.dataset.novelty
})));
  }
</script>
<script>
  document.getElementById('reset-filters').addEventListener('click', function() {
    var form = document.getElementById('filter-form');
    form.reset();
    window.location.href = window.location.pathname;
  });
</script>
<script>
  // –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π —á–µ–∫–±–æ–∫—Å–æ–≤ –≤ —Å—Ç—Ä–æ–∫—É –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Ñ–æ—Ä–º—ã
  document.getElementById('filter-form').addEventListener('submit', function(event) {
    // –ë—Ä–µ–Ω–¥—ã
    const checkedBrands = document.querySelectorAll('.brand-checkbox:checked');
    const selectedBrands = Array.from(checkedBrands).map(cb => cb.value).join(',');
    document.getElementById('brand-field').value = selectedBrands;

    // –í–Ω–µ—à–Ω—è—è –æ—Ç–¥–µ–ª–∫–∞ (out_covers)
    const checkedOutCovers = document.querySelectorAll('.out-cover-checkbox:checked');
    const selectedOutCovers = Array.from(checkedOutCovers).map(cb => cb.value).join(',');
    document.getElementById('out-cover-field').value = selectedOutCovers;

    // –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—Ç–¥–µ–ª–∫–∞ (in_covers)
    const checkedInCovers = document.querySelectorAll('.in-cover-checkbox:checked');
    const selectedInCovers = Array.from(checkedInCovers).map(cb => cb.value).join(',');
    document.getElementById('in-cover-field').value = selectedInCovers;

    // –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
    const checkedPurposes = document.querySelectorAll('.purpose-checkbox:checked');
    const selectedPurposes = Array.from(checkedPurposes).map(cb => cb.value).join(',');
    document.getElementById('purpose-field').value = selectedPurposes;
  });
</script>
<script>
function addToCompare(doorId) {
    let compareList = JSON.parse(localStorage.getItem('compareList')) || [];

    if (!compareList.includes(doorId)) {
        compareList.push(doorId);
        localStorage.setItem('compareList', JSON.stringify(compareList));
        alert('–î–≤–µ—Ä—å –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ');
    } else {
        alert('–≠—Ç–∞ –¥–≤–µ—Ä—å —É–∂–µ –≤ —Å–ø–∏—Å–∫–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è');
    }
}
</script>
<script>
  function addToCart(title, image, price) {
    // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ localStorage
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
  
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ —Ç–æ–≤–∞—Ä —Å —Ç–∞–∫–∏–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –≤ –∫–æ—Ä–∑–∏–Ω–µ
    const existingItem = cart.find(item => item.title === title);
  
    if (existingItem) {
      alert('–¢–æ–≤–∞—Ä —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!');
      return; // –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏, –µ—Å–ª–∏ —Ç–æ–≤–∞—Ä —É–∂–µ –≤ –∫–æ—Ä–∑–∏–Ω–µ
    }
  
    // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä –≤ –º–∞—Å—Å–∏–≤
    cart.push({ title: title, image: image, price: price });
  
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤ –≤ localStorage
    localStorage.setItem('cart', JSON.stringify(cart));
  
    alert('–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!');
  }
</script>

{% endblock %}